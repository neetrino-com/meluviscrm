# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é API –Ω–∞ https://meluviscrm.vercel.app/

---

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API Token

**–í–∞–∂–Ω–æ:** –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –Ω—É–∂–µ–Ω `API_TOKEN`, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel.

1. –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Vercel
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Settings ‚Üí Environment Variables**
3. –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `API_TOKEN`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–ò–ª–∏** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ Vercel —á–µ—Ä–µ–∑ CLI:
```bash
vercel env add API_TOKEN
```

---

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–∫—Ä–∏–ø—Ç)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bash —Å–∫—Ä–∏–ø—Ç–∞:

```bash
./test-production-api.sh YOUR_API_TOKEN
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints.

---

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ cURL

### 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤

```bash
curl -X GET https://meluviscrm.vercel.app/api/districts \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** JSON –º–∞—Å—Å–∏–≤ —Å —Ä–∞–π–æ–Ω–∞–º–∏
```json
[
  {
    "id": 1,
    "slug": "kentron",
    "name": "Kentron",
    "created_at": "2026-01-15T10:00:00Z",
    "updated_at": "2026-01-15T10:00:00Z"
  }
]
```

---

### 2. –ü–æ–ª—É—á–∏—Ç—å –∑–¥–∞–Ω–∏—è –ø–æ slug —Ä–∞–π–æ–Ω–∞

–ó–∞–º–µ–Ω–∏—Ç–µ `kentron` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π slug –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

```bash
curl -X GET https://meluviscrm.vercel.app/api/districts-by-slug/kentron/buildings \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** JSON –º–∞—Å—Å–∏–≤ —Å–æ –∑–¥–∞–Ω–∏—è–º–∏

---

### 3. –ü–æ–ª—É—á–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø–æ slug –∑–¥–∞–Ω–∏—è

–ó–∞–º–µ–Ω–∏—Ç–µ `tower-1` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π slug –∑–¥–∞–Ω–∏—è:

```bash
curl -X GET "https://meluviscrm.vercel.app/api/buildings-by-slug/tower-1/apartments?status=available" \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** JSON –æ–±—ä–µ–∫—Ç —Å `items` (–º–∞—Å—Å–∏–≤ –∫–≤–∞—Ä—Ç–∏—Ä) –∏ `pagination`

---

### 4. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã

–ó–∞–º–µ–Ω–∏—Ç–µ `1` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –∫–≤–∞—Ä—Ç–∏—Ä—ã:

```bash
curl -X GET https://meluviscrm.vercel.app/api/external/apartments/1 \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–≤–∞—Ä—Ç–∏—Ä–µ

---

### 5. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–≤–∞—Ä—Ç–∏—Ä—ã

```bash
curl -X PUT https://meluviscrm.vercel.app/api/apartments/1/status \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "reserved"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "id": 1,
  "status": "reserved",
  "updated_at": "2026-01-19T10:12:00Z"
}
```

---

## üåê –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (—Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ **ModHeader** –∏–ª–∏ **Requestly** –¥–ª—è Chrome/Firefox
2. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
   - **Name:** `Authorization`
   - **Value:** `Bearer YOUR_API_TOKEN`
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   - `https://meluviscrm.vercel.app/api/districts`
   - `https://meluviscrm.vercel.app/api/districts-by-slug/kentron/buildings`
   - –∏ —Ç.–¥.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

### –¢–µ—Å—Ç –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 401)

```bash
curl -X GET https://meluviscrm.vercel.app/api/districts
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"error": "Unauthorized"}` —Å –∫–æ–¥–æ–º 401

---

### –¢–µ—Å—Ç —Å –Ω–µ–≤–µ—Ä–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 401)

```bash
curl -X GET https://meluviscrm.vercel.app/api/districts \
  -H "Authorization: Bearer wrong-token"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"error": "Unauthorized"}` —Å –∫–æ–¥–æ–º 401

---

## üìä –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON –æ—Ç–≤–µ—Ç–æ–≤

–î–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ JSON –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `jq`:

```bash
curl -X GET https://meluviscrm.vercel.app/api/districts \
  -H "Authorization: Bearer YOUR_API_TOKEN" | jq '.'
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- https://jsonformatter.org/
- https://jsonviewer.stack.hu/

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Unauthorized" (401)

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –¢–æ–∫–µ–Ω –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Vercel
2. –¢–æ–∫–µ–Ω —É–∫–∞–∑–∞–Ω –Ω–µ–≤–µ—Ä–Ω–æ
3. –ó–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `API_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Vercel
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ñ–æ—Ä–º–∞—Ç: `Bearer YOUR_API_TOKEN`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π –Ω–∞ Vercel –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

### –û—à–∏–±–∫–∞: "Not Found" (404)

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–≤–µ—Ä–Ω—ã–π URL endpoint
2. –†–µ—Å—É—Ä—Å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

---

### –û—à–∏–±–∫–∞: "Failed to fetch" –∏–ª–∏ CORS

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–æ–±–ª–µ–º—ã —Å CORS
2. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ cURL –∏–ª–∏ Postman –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ Vercel

---

## üìã –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] API_TOKEN —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Vercel
- [ ] –¢–µ—Å—Ç 1: GET /api/districts - —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç 2: GET /api/districts-by-slug/{slug}/buildings - —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç 3: GET /api/buildings-by-slug/{slug}/apartments - —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç 4: GET /api/external/apartments/{id} - —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç 5: PUT /api/apartments/{id}/status - —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401
- [ ] –¢–µ—Å—Ç —Å –Ω–µ–≤–µ—Ä–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `API-SPECIFICATION.md`
- **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** `API-INTEGRATION-GUIDE.md`
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ:** `TEST-API.md`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-19
